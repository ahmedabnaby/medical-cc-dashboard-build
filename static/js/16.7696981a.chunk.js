(this["webpackJsonpekseer-dashboard"]=this["webpackJsonpekseer-dashboard"]||[]).push([[16],{359:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(117),c=n.n(a),i=n(137),r=n(12),s=n(0),l=n(301),o=n(225),j=n(168),d=n(226),u=n(227),b=n(315),h=n(54),x=n(552),m=n(118),O=n(560),p=n(1),f=function(e){var t=Object(s.useState)(!1),n=Object(r.a)(t,2),a=(n[0],n[1],function(){var t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.a)({method:"DELETE",url:"".concat("https://backend.alsahaba.sa/api","/user/").concat(null===e||void 0===e?void 0:e.patient.id,"/delete")}).then((function(e){window.location.reload()})).catch((function(e){alert("An error occured!")}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(x.a,{children:Object(p.jsx)(l.a,{container:!0,spacing:h.b,children:Object(p.jsx)(l.a,{item:!0,xs:12,children:Object(p.jsxs)(o.a,{className:"popup-container",children:[Object(p.jsx)(j.a,{title:"Consultation"}),Object(p.jsx)(d.a,{}),Object(p.jsxs)(u.a,{className:"popup-body",style:{top:"250px",overflowY:"auto",height:"75vh"},children:[Object(p.jsx)(b.a,{id:"closeBtn",onClick:null===e||void 0===e?void 0:e.handleClose,children:"X"}),Object(p.jsx)(l.a,{container:!0,spacing:h.b,children:Object(p.jsx)(l.a,{item:!0,xs:12,sm:6,children:Object(p.jsxs)(m.a,{title:null===e||void 0===e?void 0:e.patient.full_name,children:[Object(p.jsxs)("h2",{children:["Are you sure you want to delete this ",(null===e||void 0===e?void 0:e.is_doctor)?"doctor?":"patient?"]}),Object(p.jsx)(b.a,{style:{color:"red"},onClick:a,children:"Yes"}),Object(p.jsx)(b.a,{style:{color:"green"},onClick:null===e||void 0===e?void 0:e.handleClose,children:"No"})]})})})]})]})})})})})}},565:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var a=n(3),c=n(13),i=n(117),r=n.n(i),s=n(137),l=n(12),o=n(0),j=n.n(o),d=n(231),u=n(301),b=n(225),h=n(168),x=n(304),m=n(417),O=n(226),p=n(54),f=n(379),g=n(383),v=n(382),y=n(378),_=n(380),w=n(381),C=n(16),k=n(560),S=n(552),N=n(227),E=n(315),B=n(167),I=n(118),D=n(561),q=n(1),L=function(e){return Object(o.useEffect)((function(){document.getElementById("image-viewer2").style.display="block"}),[]),Object(q.jsx)(S.a,{id:"image-viewer2",children:Object(q.jsx)(u.a,{container:!0,spacing:p.b,children:Object(q.jsx)(u.a,{item:!0,xs:12,children:Object(q.jsxs)(b.a,{className:"popup-container",children:[Object(q.jsx)(h.a,{title:"Consultation"}),Object(q.jsx)(O.a,{}),Object(q.jsxs)(N.a,{className:"popup-body",style:{top:"250px",overflowY:"auto",height:"75vh"},children:[Object(q.jsx)(E.a,{id:"closeBtn",onClick:function(){null===e||void 0===e||e.handleCloseShowSelectedConsultation()},children:"X"}),Object(q.jsx)(u.a,{container:!0,spacing:p.b,children:Object(q.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(q.jsxs)(I.a,{title:"Consultation",children:[Object(q.jsxs)("div",{className:"mt-4",children:[Object(q.jsx)("h5",{children:"Chief Complaint:"}),Object(q.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.chief_complaint})]}),Object(q.jsxs)("div",{className:"mt-4",children:[Object(q.jsx)("h5",{children:"History of Illness:"}),Object(q.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.history_of_illness})]}),Object(q.jsxs)("div",{className:"mt-4",children:[Object(q.jsx)("h5",{children:"Review of systems:"}),Object(q.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.review_of_systems})]}),Object(q.jsxs)("div",{className:"mt-4",children:[Object(q.jsx)("h5",{children:"Examinations:"}),Object(q.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.examination})]}),Object(q.jsxs)("div",{className:"mt-4",children:[Object(q.jsx)("h5",{children:"Assessments/Plans:"}),Object(q.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.assessment})]}),Object(q.jsxs)("div",{className:"mt-4",children:[Object(q.jsx)("h5",{children:"Medication:"}),Object(q.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.medication})]}),Object(q.jsxs)("div",{className:"mt-4",children:[Object(q.jsx)("h5",{children:"Sick leave:"}),Object(q.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.sick_leave})]}),Object(q.jsxs)("div",{className:"mt-4 mb-4",children:[Object(q.jsx)("h5",{children:"Created At:"}),Object(q.jsx)("strong",{children:function(e){var t=new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(l.a)(t,5),a=n[0],c=n[1],i=n[2],r=n[3],s=n[4],o=a.toUpperCase();return"".concat(c," ").concat(o," ").concat(i," ").concat(r," ").concat(s)}(null===e||void 0===e?void 0:e.consultation.created_at)})]})]})})})]})]})})})})},U=function(e){var t="https://backend.alsahaba.sa/api",n=Object(o.useState)([]),a=Object(l.a)(n,2),c=a[0],i=a[1],j=Object(o.useState)([]),d=Object(l.a)(j,2),x=d[0],m=d[1],f=Object(o.useState)(null),g=Object(l.a)(f,2),v=g[0],y=g[1],_=Object(o.useState)(!1),w=Object(l.a)(_,2),C=w[0],B=w[1],U=Object(o.useState)(!1),F=Object(l.a)(U,2),A=F[0],P=F[1],R=Object(o.useState)(!1),W=Object(l.a)(R,2),X=(W[0],W[1]),Y=function(){var n=Object(s.a)(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return X(!0),n.next=3,k.a.get("".concat(t,"/consultations/")).then((function(t){i(t.data),X(!1);for(var n=0;n<t.data.length;){if(t.data[n].patient_id===(null===e||void 0===e?void 0:e.patient.id)){B(!0);break}B(!1),n++}}));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),M=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(t,"/users/")).then((function(e){m(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){var t=new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(l.a)(t,5),a=n[0],c=n[1],i=n[2],r=n[3],s=n[4],o=a.toUpperCase();return"".concat(c," ").concat(o," ").concat(i," ").concat(r," ").concat(s)};return Object(o.useEffect)((function(){document.getElementById("image-viewer").style.display="block",Y(),M()}),[]),Object(q.jsxs)(q.Fragment,{children:[A&&Object(q.jsx)(L,{consultation:v,handleCloseShowSelectedConsultation:function(){P(!1)}}),Object(q.jsx)(S.a,{id:"image-viewer",onClick:function(){document.getElementById("image-viewer").style.display="none"},children:Object(q.jsx)(u.a,{container:!0,spacing:p.b,children:Object(q.jsx)(u.a,{item:!0,xs:12,children:Object(q.jsxs)(b.a,{className:"popup-container",children:[Object(q.jsx)(h.a,{title:"Consultation"}),Object(q.jsx)(O.a,{}),Object(q.jsxs)(N.a,{className:"popup-body",style:{top:"250px",overflowY:"auto",height:"75vh"},children:[Object(q.jsx)(E.a,{id:"closeBtn",onClick:null===e||void 0===e?void 0:e.handleCloseConsultations,children:"X"}),Object(q.jsx)(u.a,{container:!0,spacing:p.b,children:Object(q.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(q.jsx)(I.a,{title:null===e||void 0===e?void 0:e.patient.full_name,children:C?Object(q.jsx)(q.Fragment,{children:c&&(null===c||void 0===c?void 0:c.filter((function(t){var n;return t.patient_id===(null===e||void 0===e||null===(n=e.patient)||void 0===n?void 0:n.id)})).map((function(e,t){return Object(q.jsx)(D.a,{as:"ol",children:null===x||void 0===x?void 0:x.filter((function(t){return e.doctor_id===t.id})).map((function(n){return Object(q.jsxs)(D.a.Item,{as:"li",className:"d-flex justify-content-between align-items-center",style:{cursor:"pointer",marginLeft:"-25px"},onClick:function(){return y(e),void P(!0)},children:[t+1,".",Object(q.jsxs)("div",{className:"ms-2 me-auto",children:[Object(q.jsx)("div",{className:"fw-bold",children:e.chief_complaint}),Object(q.jsxs)("strong",{style:{color:"gray"},children:["Dr. ID: \xa0",n.id]}),Object(q.jsx)("br",{}),Object(q.jsx)("strong",{children:n.full_name})]}),Object(q.jsx)("strong",{children:J(e.created_at)})]},n.id)}))},e.id)})))}):Object(q.jsx)("h5",{className:"ml-4",children:"No consultations yet!"})})})})]})]})})})})]})},F=function(e){var t=j.a.useState(!1),n=Object(l.a)(t,2),a=n[0],c=n[1],i=j.a.useState([]),d=Object(l.a)(i,2),x=d[0],m=d[1],f=j.a.useState(!1),g=Object(l.a)(f,2),v=g[0],y=g[1];Object(o.useEffect)((function(){(function(){var t=Object(s.a)(r.a.mark((function t(){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e.patient.copy_of_iqama_number);case 3:n=t.sent,a=n.headers.get("content-type"),y(a.startsWith("image")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error checking file type:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[e.patient.copy_of_iqama_number]);return Object(q.jsxs)(q.Fragment,{children:[a&&Object(q.jsx)(U,{patient:x,handleCloseConsultations:function(){c(!1)}}),Object(q.jsx)(S.a,{children:Object(q.jsx)(u.a,{container:!0,spacing:p.b,children:Object(q.jsx)(u.a,{item:!0,xs:12,children:Object(q.jsxs)(b.a,{className:"popup-container",children:[Object(q.jsx)(h.a,{title:"Consultation"}),Object(q.jsx)(O.a,{}),Object(q.jsxs)(N.a,{className:"popup-body",id:"popupCustom",children:[Object(q.jsx)(E.a,{id:"closeBtn",onClick:function(){return e.handleClose()},children:"X"}),Object(q.jsx)(u.a,{container:!0,spacing:p.b,children:Object(q.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(q.jsx)(I.a,{title:e.patient.full_name,children:Object(q.jsx)(u.a,{container:!0,direction:"column",id:"poppins",spacing:1,children:Object(q.jsxs)(u.a,{item:!0,children:[Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Patient name: \xa0",Object(q.jsx)("span",{id:"small-text",children:e.patient.full_name})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["ID/Iqama number: \xa0",Object(q.jsx)("span",{id:"small-text",children:e.patient.iqama_number})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Copy of ID/Iqama number: \xa0",v?Object(q.jsx)("span",{id:"small-text",onClick:function(){document.getElementById("full-image").src=e.patient.copy_of_iqama_number,document.getElementById("image-viewer").style.display="block"},style:{cursor:"pointer",textDecoration:"underline",color:"blue"},children:"Image"}):Object(q.jsx)("a",{href:e.patient.copy_of_iqama_number,target:"_blank",rel:"noopener noreferrer",children:"File"}),v&&Object(q.jsxs)("div",{id:"image-viewer",onClick:function(){document.getElementById("image-viewer").style.display="none"},children:[Object(q.jsx)("span",{className:"closed",children:"\xd7"}),Object(q.jsx)("img",{className:"modal-content",id:"full-image",alt:"Image"})]})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Date of birth: \xa0",Object(q.jsx)("span",{id:"small-text",children:e.patient.date_of_birth})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Mobile number: \xa0",Object(q.jsx)("span",{id:"small-text",children:e.patient.mobile_number})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["E-mail: \xa0",Object(q.jsx)("span",{id:"small-text",children:e.patient.email})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Nationality: \xa0",Object(q.jsx)("span",{id:"small-text",children:e.patient.nationality})]}),Object(q.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Last login: \xa0",Object(q.jsx)("span",{id:"small-text",children:function(e){var t=new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(l.a)(t,5),a=n[0],c=n[1],i=n[2],r=n[3],s=n[4],o=a.toUpperCase();return"".concat(c," ").concat(o," ").concat(i," ").concat(r," ").concat(s)}(e.patient.last_login)})]}),Object(q.jsx)(E.a,{variant:"contained",color:"primary",disableElevation:!0,type:"submit",onClick:function(){return t=e.patient,c(!0),void m(t);var t},children:"Show Consultations"})]})})})})})]})]})})})})]})},A=n(359),P=Object(d.a)({table:{minWidth:350},searchControl:{width:"100%",paddingRight:"8px",paddingLeft:"16px",marginBottom:"16px",marginTop:"16px"}});function R(){var e=P(),t="https://backend.alsahaba.sa/api",n=j.a.useState([]),i=Object(l.a)(n,2),d=i[0],S=i[1],N=j.a.useState([]),E=Object(l.a)(N,2),B=E[0],I=E[1],D=j.a.useState(""),L=Object(l.a)(D,2),U=L[0],R=L[1],W=j.a.useState(!1),X=Object(l.a)(W,2),Y=X[0],M=X[1],J=j.a.useState(!1),T=Object(l.a)(J,2),z=T[0],H=T[1],V=j.a.useState({}),G=Object(l.a)(V,2),K=G[0],Q=G[1],Z=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(t,"/users/")).then((function(e){S(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(t,"/search?query=").concat(U)).then((function(e){S(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(e){var t=new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(l.a)(t,5),a=n[0],c=n[1],i=n[2],r=n[3],s=n[4],o=a.toUpperCase();return"".concat(c," ").concat(o," ").concat(i," ").concat(r," ").concat(s)};return Object(o.useEffect)((function(){var e=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t.copy_of_iqama_number);case 3:n=e.sent,i=n.headers.get("content-type"),Q((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},t.id,i))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error checking file type for patient ".concat(t.id,":"),e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();null===d||void 0===d||d.filter((function(e){return!e.is_doctor})).forEach((function(t){K[t.id]||e(t)}))}),[d]),Object(o.useEffect)((function(){Z()}),[]),Object(q.jsxs)(j.a.Fragment,{children:[Y&&Object(q.jsx)(F,{patient:B,handleClose:function(){M(!1)}}),z&&Object(q.jsx)(A.a,{patient:B,handleClose:function(){H(!1)}}),Object(q.jsx)(u.a,{container:!0,spacing:p.b,children:Object(q.jsx)(u.a,{item:!0,xs:12,children:Object(q.jsxs)(b.a,{children:[Object(q.jsxs)(u.a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[Object(q.jsx)(u.a,{item:!0,children:Object(q.jsx)(h.a,{title:"Registered Patients"})}),Object(q.jsx)(u.a,{item:!0,style:{marginRight:"25px"},children:Object(q.jsx)(x.a,{className:e.searchControl,id:"input-search-profile",value:U,onChange:function(e){""===e.target.value?(R(e.target.value),Z()):(R(e.target.value),$())},placeholder:"Search patients",startAdornment:Object(q.jsx)(m.a,{position:"start",children:Object(q.jsx)(C.V,{stroke:1.5,size:"1.3rem",className:e.startAdornment})}),"aria-describedby":"search-helper-text",inputProps:{"aria-label":"weight"},labelWidth:0})})]}),Object(q.jsx)(O.a,{}),Object(q.jsx)(y.a,{children:Object(q.jsxs)(f.a,{className:e.table,"aria-label":"simple table",children:[Object(q.jsx)(_.a,{children:Object(q.jsxs)(w.a,{children:[Object(q.jsx)(v.a,{children:"#"}),Object(q.jsx)(v.a,{children:"Patient name"}),Object(q.jsx)(v.a,{align:"left",children:"ID/Iqama number"}),Object(q.jsx)(v.a,{align:"left",children:"Copy of iqama number"}),Object(q.jsx)(v.a,{align:"left",style:{whiteSpace:"nowrap"},children:"Date of birth"}),Object(q.jsx)(v.a,{align:"left",children:"Mobile number"}),Object(q.jsx)(v.a,{align:"left",children:"E-mail"}),Object(q.jsx)(v.a,{align:"left",children:"Nationality"}),Object(q.jsx)(v.a,{align:"left",children:"Registered date"}),Object(q.jsx)(v.a,{align:"left",children:"Last login"}),Object(q.jsx)(v.a,{align:"left"}),Object(q.jsx)(v.a,{align:"left"})]})}),Object(q.jsx)(g.a,{children:d&&(null===d||void 0===d?void 0:d.filter((function(e){return!e.is_doctor})).map((function(e,t){return Object(q.jsxs)(w.a,{children:[Object(q.jsx)(v.a,{align:"left",children:t+1}),Object(q.jsx)(v.a,{component:"th",children:e.full_name}),Object(q.jsx)(v.a,{align:"left",children:e.iqama_number}),Object(q.jsx)(v.a,{align:"left",children:K[e.id]&&(K[e.id].startsWith("image")?Object(q.jsx)("a",{href:e.copy_of_iqama_number,target:"_blank",rel:"noopener noreferrer",children:"Image"}):Object(q.jsx)("a",{href:e.copy_of_iqama_number,target:"_blank",rel:"noopener noreferrer",children:"File"}))}),Object(q.jsx)(v.a,{align:"left",children:e.date_of_birth}),Object(q.jsx)(v.a,{align:"left",children:e.mobile_number}),Object(q.jsx)(v.a,{align:"left",children:e.email}),Object(q.jsx)(v.a,{align:"left",children:e.nationality}),Object(q.jsx)(v.a,{align:"left",children:ee(e.created_at)}),Object(q.jsx)(v.a,{align:"left",children:ee(e.last_login)}),Object(q.jsx)(v.a,{align:"left",onClick:function(){return function(e){M(!0),I(e)}(e)},children:Object(q.jsx)("img",{src:"images/eye.png",id:"delete-icon"})}),Object(q.jsx)(v.a,{align:"left",onClick:function(){return function(e){H(!0),I(e)}(e)},children:Object(q.jsx)("img",{src:"images/trash-bin.png",id:"delete-icon"})})]},e.id)})))})]})})]})})})]})}}}]);
//# sourceMappingURL=16.7696981a.chunk.js.map