(this["webpackJsonpekseer-dashboard"]=this["webpackJsonpekseer-dashboard"]||[]).push([[17],{564:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return P}));var a=n(117),i=n.n(a),c=n(137),s=n(12),l=n(0),r=n.n(l),o=n(231),j=n(301),d=n(225),u=n(168),b=n(304),h=n(382),m=n(226),x=n(54),O=n(354),p=n(358),f=n(357),g=n(353),v=n(355),y=n(356),C=n(16),w=n(559),_=n(551),S=n(227),k=n(315),N=n(167),B=n(118),I=n(560),D=n(1),E=function(e){return Object(l.useEffect)((function(){document.getElementById("image-viewer2").style.display="block"}),[]),Object(D.jsx)(_.a,{id:"image-viewer2",children:Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,children:Object(D.jsxs)(d.a,{className:"popup-container",children:[Object(D.jsx)(u.a,{title:"Consultation"}),Object(D.jsx)(m.a,{}),Object(D.jsxs)(S.a,{className:"popup-body",style:{top:"250px",overflowY:"auto",height:"75vh"},children:[Object(D.jsx)(k.a,{id:"closeBtn",onClick:function(){null===e||void 0===e||e.handleCloseShowSelectedConsultation()},children:"X"}),Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,sm:6,children:Object(D.jsxs)(B.a,{title:"Consultation",children:[Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Chief Complaint:"}),Object(D.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.chief_complaint})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"History of Illness:"}),Object(D.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.history_of_illness})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Review of systems:"}),Object(D.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.review_of_systems})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Examinations:"}),Object(D.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.examination})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Assessments/Plans:"}),Object(D.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.assessment})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Medication:"}),Object(D.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.medication})]}),Object(D.jsxs)("div",{className:"mt-4",children:[Object(D.jsx)("h5",{children:"Sick leave:"}),Object(D.jsx)("strong",{children:null===e||void 0===e?void 0:e.consultation.sick_leave})]}),Object(D.jsxs)("div",{className:"mt-4 mb-4",children:[Object(D.jsx)("h5",{children:"Created At:"}),Object(D.jsx)("strong",{children:function(e){var t=new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(s.a)(t,5),a=n[0],i=n[1],c=n[2],l=n[3],r=n[4],o=a.toUpperCase();return"".concat(i," ").concat(o," ").concat(c," ").concat(l," ").concat(r)}(null===e||void 0===e?void 0:e.consultation.created_at)})]})]})})})]})]})})})})},q=function(e){var t="https://backend.alsahaba.sa/api",n=Object(l.useState)([]),a=Object(s.a)(n,2),r=a[0],o=a[1],b=Object(l.useState)([]),h=Object(s.a)(b,2),O=h[0],p=h[1],f=Object(l.useState)(null),g=Object(s.a)(f,2),v=g[0],y=g[1],C=Object(l.useState)(!1),N=Object(s.a)(C,2),q=N[0],L=N[1],U=Object(l.useState)(!1),P=Object(s.a)(U,2),R=P[0],A=P[1],F=Object(l.useState)(!1),M=Object(s.a)(F,2),X=(M[0],M[1]),J=function(){var n=Object(c.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return X(!0),n.next=3,w.a.get("".concat(t,"/consultations/")).then((function(t){o(t.data),X(!1);for(var n=0;n<t.data.length;){if(t.data[n].patient_id===(null===e||void 0===e?void 0:e.patient.id)){L(!0);break}L(!1),n++}}));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),W=function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat(t,"/users/")).then((function(e){p(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(e){var t=new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(s.a)(t,5),a=n[0],i=n[1],c=n[2],l=n[3],r=n[4],o=a.toUpperCase();return"".concat(i," ").concat(o," ").concat(c," ").concat(l," ").concat(r)};return Object(l.useEffect)((function(){document.getElementById("image-viewer").style.display="block",J(),W()}),[]),Object(D.jsxs)(D.Fragment,{children:[R&&Object(D.jsx)(E,{consultation:v,handleCloseShowSelectedConsultation:function(){A(!1)}}),Object(D.jsx)(_.a,{id:"image-viewer",onClick:function(){document.getElementById("image-viewer").style.display="none"},children:Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,children:Object(D.jsxs)(d.a,{className:"popup-container",children:[Object(D.jsx)(u.a,{title:"Consultation"}),Object(D.jsx)(m.a,{}),Object(D.jsxs)(S.a,{className:"popup-body",style:{top:"250px",overflowY:"auto",height:"75vh"},children:[Object(D.jsx)(k.a,{id:"closeBtn",onClick:null===e||void 0===e?void 0:e.handleCloseConsultations,children:"X"}),Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(B.a,{title:null===e||void 0===e?void 0:e.patient.full_name,children:q?Object(D.jsx)(D.Fragment,{children:r&&(null===r||void 0===r?void 0:r.filter((function(t){var n;return t.patient_id===(null===e||void 0===e||null===(n=e.patient)||void 0===n?void 0:n.id)})).map((function(e,t){return Object(D.jsx)(I.a,{as:"ol",children:null===O||void 0===O?void 0:O.filter((function(t){return e.doctor_id===t.id})).map((function(n){return Object(D.jsxs)(I.a.Item,{as:"li",className:"d-flex justify-content-between align-items-center",style:{cursor:"pointer",marginLeft:"-25px"},onClick:function(){return y(e),void A(!0)},children:[t+1,".",Object(D.jsxs)("div",{className:"ms-2 me-auto",children:[Object(D.jsx)("div",{className:"fw-bold",children:e.chief_complaint}),Object(D.jsxs)("strong",{style:{color:"gray"},children:["Dr. ID: \xa0",n.id]}),Object(D.jsx)("br",{}),Object(D.jsx)("strong",{children:n.full_name})]}),Object(D.jsx)("strong",{children:Y(e.created_at)})]},n.id)}))},e.id)})))}):Object(D.jsx)("h5",{className:"ml-4",children:"No consultations yet!"})})})})]})]})})})})]})},L=function(e){var t=r.a.useState(!1),n=Object(s.a)(t,2),a=n[0],i=n[1],c=r.a.useState([]),l=Object(s.a)(c,2),o=l[0],b=l[1];return Object(D.jsxs)(D.Fragment,{children:[a&&Object(D.jsx)(q,{patient:o,handleCloseConsultations:function(){i(!1)}}),Object(D.jsx)(_.a,{children:Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,children:Object(D.jsxs)(d.a,{className:"popup-container",children:[Object(D.jsx)(u.a,{title:"Consultation"}),Object(D.jsx)(m.a,{}),Object(D.jsxs)(S.a,{className:"popup-body",id:"popupCustom",children:[Object(D.jsx)(k.a,{id:"closeBtn",onClick:function(){return e.handleClose()},children:"X"}),Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,sm:6,children:Object(D.jsx)(B.a,{title:e.patient.full_name,children:Object(D.jsx)(j.a,{container:!0,direction:"column",id:"poppins",spacing:1,children:Object(D.jsxs)(j.a,{item:!0,children:[Object(D.jsxs)(N.a,{variant:"h3",gutterBottom:!0,children:["Patient name: \xa0",Object(D.jsx)("span",{id:"small-text",children:e.patient.full_name})]}),Object(D.jsxs)(N.a,{variant:"h3",gutterBottom:!0,children:["ID/Iqama number: \xa0",Object(D.jsx)("span",{id:"small-text",children:e.patient.iqama_number})]}),Object(D.jsxs)(N.a,{variant:"h3",gutterBottom:!0,children:["Copy of ID/Iqama number: \xa0",Object(D.jsx)("span",{id:"small-text",onClick:function(){return t=e.patient.copy_of_iqama_number,document.getElementById("full-image").src=t,void(document.getElementById("image-viewer").style.display="block");var t},style:{cursor:"pointer",textDecoration:"underline",color:"blue"},children:"Image"}),Object(D.jsxs)("div",{id:"image-viewer",onClick:function(){document.getElementById("image-viewer").style.display="none"},children:[Object(D.jsx)("span",{className:"closed",children:"\xd7"}),Object(D.jsx)("img",{className:"modal-content",id:"full-image"})]})]}),Object(D.jsxs)(N.a,{variant:"h3",gutterBottom:!0,children:["Date of birth: \xa0",Object(D.jsx)("span",{id:"small-text",children:e.patient.date_of_birth})]}),Object(D.jsxs)(N.a,{variant:"h3",gutterBottom:!0,children:["Mobile number: \xa0",Object(D.jsx)("span",{id:"small-text",children:e.patient.mobile_number})]}),Object(D.jsxs)(N.a,{variant:"h3",gutterBottom:!0,children:["E-mail: \xa0",Object(D.jsx)("span",{id:"small-text",children:e.patient.email})]}),Object(D.jsxs)(N.a,{variant:"h3",gutterBottom:!0,children:["Nationality: \xa0",Object(D.jsx)("span",{id:"small-text",children:e.patient.nationality})]}),Object(D.jsxs)(N.a,{variant:"h3",gutterBottom:!0,children:["Last login: \xa0",Object(D.jsx)("span",{id:"small-text",children:function(e){var t=new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(s.a)(t,5),a=n[0],i=n[1],c=n[2],l=n[3],r=n[4],o=a.toUpperCase();return"".concat(i," ").concat(o," ").concat(c," ").concat(l," ").concat(r)}(e.patient.last_login)})]}),Object(D.jsx)(k.a,{variant:"contained",color:"primary",disableElevation:!0,type:"submit",onClick:function(){return t=e.patient,i(!0),void b(t);var t},children:"Show Consultations"})]})})})})})]})]})})})})]})},U=Object(o.a)({table:{minWidth:350},searchControl:{width:"100%",paddingRight:"8px",paddingLeft:"16px",marginBottom:"16px",marginTop:"16px"}});function P(){var e=U(),t="https://backend.alsahaba.sa/api",n=r.a.useState([]),a=Object(s.a)(n,2),o=a[0],_=a[1],S=r.a.useState([]),k=Object(s.a)(S,2),N=k[0],B=k[1],I=r.a.useState(""),E=Object(s.a)(I,2),q=E[0],P=E[1],R=r.a.useState(!1),A=Object(s.a)(R,2),F=A[0],M=A[1],X=function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat(t,"/users/")).then((function(e){_(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat(t,"/search?query=").concat(q)).then((function(e){_(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(e){var t=new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).split(" "),n=Object(s.a)(t,5),a=n[0],i=n[1],c=n[2],l=n[3],r=n[4],o=a.toUpperCase();return"".concat(i," ").concat(o," ").concat(c," ").concat(l," ").concat(r)};return Object(l.useEffect)((function(){X()}),[]),Object(D.jsxs)(r.a.Fragment,{children:[F&&Object(D.jsx)(L,{patient:N,handleClose:function(){M(!1)}}),Object(D.jsx)(j.a,{container:!0,spacing:x.b,children:Object(D.jsx)(j.a,{item:!0,xs:12,children:Object(D.jsxs)(d.a,{children:[Object(D.jsxs)(j.a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[Object(D.jsx)(j.a,{item:!0,children:Object(D.jsx)(u.a,{title:"Registered Patients"})}),Object(D.jsx)(j.a,{item:!0,style:{marginRight:"25px"},children:Object(D.jsx)(b.a,{className:e.searchControl,id:"input-search-profile",value:q,onChange:function(e){""===e.target.value?(P(e.target.value),X()):(P(e.target.value),J())},placeholder:"Search patients",startAdornment:Object(D.jsx)(h.a,{position:"start",children:Object(D.jsx)(C.V,{stroke:1.5,size:"1.3rem",className:e.startAdornment})}),"aria-describedby":"search-helper-text",inputProps:{"aria-label":"weight"},labelWidth:0})})]}),Object(D.jsx)(m.a,{}),Object(D.jsx)(g.a,{children:Object(D.jsxs)(O.a,{className:e.table,"aria-label":"simple table",children:[Object(D.jsx)(v.a,{children:Object(D.jsxs)(y.a,{children:[Object(D.jsx)(f.a,{children:"#"}),Object(D.jsx)(f.a,{children:"Patient name"}),Object(D.jsx)(f.a,{align:"left",children:"ID/Iqama number"}),Object(D.jsx)(f.a,{align:"left",children:"Copy of iqama number"}),Object(D.jsx)(f.a,{align:"left",style:{whiteSpace:"nowrap"},children:"Date of birth"}),Object(D.jsx)(f.a,{align:"left",children:"Mobile number"}),Object(D.jsx)(f.a,{align:"left",children:"E-mail"}),Object(D.jsx)(f.a,{align:"left",children:"Nationality"}),Object(D.jsx)(f.a,{align:"left",children:"Registered date"}),Object(D.jsx)(f.a,{align:"left",children:"Last login"})]})}),Object(D.jsx)(p.a,{children:o&&(null===o||void 0===o?void 0:o.filter((function(e){return!e.is_doctor})).map((function(e,t){return Object(D.jsxs)(y.a,{onClick:function(){return function(e){M(!0),B(e)}(e)},children:[Object(D.jsx)(f.a,{align:"left",children:t+1}),Object(D.jsx)(f.a,{component:"th",children:e.full_name}),Object(D.jsx)(f.a,{align:"left",children:e.iqama_number}),Object(D.jsx)(f.a,{align:"left",children:"Image"}),Object(D.jsx)(f.a,{align:"left",children:e.date_of_birth}),Object(D.jsx)(f.a,{align:"left",children:e.mobile_number}),Object(D.jsx)(f.a,{align:"left",children:e.email}),Object(D.jsx)(f.a,{align:"left",children:e.nationality}),Object(D.jsx)(f.a,{align:"left",children:W(e.created_at)}),Object(D.jsx)(f.a,{align:"left",children:W(e.last_login)})]},e.id)})))})]})})]})})})]})}}}]);
//# sourceMappingURL=17.18a0f795.chunk.js.map